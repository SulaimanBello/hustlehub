# ========================================
# HustleHub Environment Configuration
# ========================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control

# ========================================
# SERVER CONFIGURATION
# ========================================
NODE_ENV=production
PORT=5000
API_VERSION=v1

# ========================================
# DATABASE CONFIGURATION (Required)
# ========================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
# For local dev: postgresql://hustlehub:hustlehub_dev_password@localhost:5432/hustlehub_dev
# For EasyPanel: Use the managed database connection string
DATABASE_URL=postgresql://user:password@host:5432/database

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ========================================
# AUTHENTICATION (Required)
# ========================================
# JWT Secret - Use a strong random string (32+ characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# JWT expiration (e.g., 7d, 30d, 90d)
JWT_EXPIRES_IN=7d

# ========================================
# PAYMENT GATEWAY - Flutterwave (Required)
# ========================================
# Get your keys from: https://dashboard.flutterwave.com/settings/apis
# Use test keys for development, live keys for production
FLUTTERWAVE_SECRET_KEY=FLWSECK-your-secret-key-here
FLUTTERWAVE_PUBLIC_KEY=FLWPUBK-your-public-key-here

# Optional: For encryption and webhook verification
FLUTTERWAVE_ENCRYPTION_KEY=FLWSECK_TEST-your-encryption-key
FLUTTERWAVE_WEBHOOK_SECRET=your-webhook-secret-here

# ========================================
# SMS PROVIDER (Choose one)
# ========================================
# Options: twilio, termii, africasTalking, console (for dev)
SMS_PROVIDER=twilio

# --- Twilio ---
# Get credentials from: https://www.twilio.com/console
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# --- Termii (African SMS) ---
# Get API key from: https://termii.com
TERMII_API_KEY=your-termii-api-key
TERMII_SENDER_ID=HustleHub

# --- Africa's Talking ---
# Get credentials from: https://account.africastalking.com
AT_API_KEY=your-africas-talking-api-key
AT_USERNAME=your-africas-talking-username

# ========================================
# CORS CONFIGURATION
# ========================================
# Comma-separated list of allowed origins
# For production, set to your actual domain(s)
CORS_ORIGIN=http://localhost:3001,https://yourdomain.com,https://admin.yourdomain.com

# ========================================
# BUSINESS RULES
# ========================================
# Platform fee percentage (e.g., 15 = 15%)
PLATFORM_FEE_PERCENT=15

# Default task search radius in kilometers
DEFAULT_TASK_RADIUS_KM=5

# OTP settings
OTP_EXPIRY_MINUTES=10
OTP_MAX_ATTEMPTS=3

# ========================================
# RATE LIMITING
# ========================================
# Time window in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Max requests per window (lower for production, higher for dev)
RATE_LIMIT_MAX_REQUESTS=100

# ========================================
# LOGGING
# ========================================
# Log level: error, warn, info, debug
LOG_LEVEL=info

# ========================================
# DOCKER COMPOSE VARIABLES (Optional)
# ========================================
# Only needed if using docker-compose.yml locally

# PostgreSQL
POSTGRES_DB=hustlehub
POSTGRES_USER=hustlehub
POSTGRES_PASSWORD=strong-database-password-here

# Ports (if you need to change defaults)
DB_PORT=5432
BACKEND_PORT=5000
ADMIN_PORT=3001

# ========================================
# EASYPANEL DEPLOYMENT NOTES
# ========================================
# When deploying to EasyPanel:
# 1. Set DATABASE_URL to your managed PostgreSQL instance
# 2. Set all required variables (marked above)
# 3. Use production/live keys for payment and SMS providers
# 4. Set CORS_ORIGIN to your actual domain(s)
# 5. Generate a strong JWT_SECRET
# 6. Set NODE_ENV=production
# 7. Adjust RATE_LIMIT_MAX_REQUESTS based on expected traffic

# ========================================
# ADMIN FRONTEND (Vite Build Variables)
# ========================================
# API URL for admin dashboard
# For production: leave as /api/v1 (nginx will proxy)
# For development: use http://localhost:5000/api/v1
VITE_API_URL=/api/v1
